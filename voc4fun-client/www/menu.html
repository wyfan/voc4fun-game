<ons-page modifier="menu-page" id="menu_html"> 
    <ons-row class="target-status menu-heading" style="cursor: pointer;">

        <div class="left" style="padding: 0.5rem; font-size: 12pt;" 
             ng-click="menu_header_click($event);">
             {{ ctl_profile.status.name}} 
            <div ng-show="ctl_target.is_target_setted() && ctl_target.is_all_finish() === false && !CONFIG.control_group_version"
                 ng-class="{'target-incompleted': (ctl_target.get_complete_percent() < 100), 'target-completed': (ctl_target.is_all_finish())}">
                {{ 'TARGET_MENU_STATUS' | translate }}
                <span class="complete-percent" > 
                    {{ ctl_target.get_complete_percent()}}%
                    <i class="ion-android-star" ng-show="ctl_target.get_complete_percent() === 100 && ctl_target.is_all_finish()" />
                </span>
            </div>
            <div ng-show="ctl_target.is_all_finish() && !CONFIG.control_group_version" class="target-completed">
                 已經全部完成
                 <i class="ion-android-star" />
            </div>
        </div>

        <div class="right" style="position: absolute;right: 0;">
            <ons-toolbar-button class="menu-close" ng-click="app.menu.close()">
                <ons-icon icon="ion-arrow-left-a" fixed-width="true"></ons-icon>
            </ons-toolbar-button>
        </div>

    </ons-row>

    <!-- ======================================================= -->

    <ons-list>
        <ons-list-item ng-click="ctl_target.enter_from_menu();
            menu_click($event);" ng-show="!CONFIG.control_group_version">
            <ons-icon icon="ion-ios-pie-outline" fixed-width="true"></ons-icon>
            <span class="menu-label">
                {{ 'TARGET_MENU_TITLE' | translate }}
            </span>
            <span class="right" style="float:right" 
                   ng-class="{'target-incompleted': (ctl_target.get_complete_percent() < 100), 'target-completed': (ctl_target.is_all_finish())}"
                   ng-show="!CONFIG.control_group_version">
                <span ng-show="ctl_target.is_all_finish() === false">
                    {{ ctl_target.get_complete_percent()}}%
                </span>
                <ons-icon icon="ion-android-star" fixed-width="true"
                           ng-show="ctl_target.is_all_finish()"></ons-icon>
            </span>
        </ons-list-item>

        <ons-list-item ng-click="ctl_learn_flashcard.enter(false);
            menu_click($event);">
            <ons-icon icon="ion-ios-browsers-outline" fixed-width="true"></ons-icon>
            <span class="menu-label">
                {{ 'LEARN_FLASHCARD_TITLE' | translate }}
            </span>

            <span class="right" style="float:right"
                   ng-class="{'target-incompleted': (ctl_target.status.learn_flashcard.done < ctl_target.status.learn_flashcard.target)}"
                   ng-show="!CONFIG.control_group_version">
                <!-- {{ ctl_target.status.learn_flashcard.done}} / {{ ctl_target.status.learn_flashcard.target}}-->
                <span ng-show="ctl_target.is_all_finish('learn_flashcard') === false">
                    {{ ctl_target.menu_display_target("learn_flashcard", ctl_target.status.learn_flashcard.done, ctl_target.status.learn_flashcard.target) }}
                </span>
                <span class="target-completed" ng-show="ctl_target.is_all_finish('learn_flashcard')">
                    {{ ctl_target.menu_display_target("learn_flashcard", ctl_target.status.learn_flashcard.done, ctl_target.status.learn_flashcard.target) }}
                    <i class="ion-android-star" />
                </span>
            </span>
        </ons-list-item>
        
        <ons-list-item ng-click="ctl_note_list.enter();
            menu_click($event);">
            <ons-icon icon="ion-edit" fixed-width="true"></ons-icon>
            <span class="menu-label">
                筆記列表 <!-- @TODO 語系 -->
            </span>

            <span  class="right" style="float:right"
                   ng-class="{'target-incompleted': (ctl_target.status.take_note.done < ctl_target.status.take_note.target)}"
                   ng-show="!CONFIG.control_group_version">
                <!-- {{ ctl_target.status.take_note.done}} / {{ ctl_target.status.take_note.target}} -->
                <span ng-show="ctl_target.is_all_finish('take_note') === false">
                    {{ ctl_target.menu_display_target("take_note", ctl_target.status.take_note.done, ctl_target.status.take_note.target) }}
                </span>
                <span class="target-completed" ng-show="ctl_target.is_all_finish('take_note')">
                    {{ ctl_target.menu_display_target("take_note", ctl_target.status.take_note.done, ctl_target.status.take_note.target) }}
                    <i class="ion-android-star" />
                </span>
            </span>
        </ons-list-item>

        <ons-list-item ng-click="ctl_test_select.enter();
            menu_click($event);">
            <ons-icon icon="ion-ios-compose-outline" fixed-width="true"></ons-icon>
            <span class="menu-label">
                {{ 'TEST_SELECT_TITLE' | translate }}
            </span>
            <span class="right" style="float:right"
                  ng-class="{'target-incompleted': (ctl_target.status.test_select.done < ctl_target.status.test_select.target)}"
                  ng-show="!CONFIG.control_group_version">
                <!-- {{ ctl_target.status.test_select.done}} / {{ ctl_target.status.test_select.target}} -->
                <span ng-show="ctl_target.is_all_finish('test_select') === false">
                    {{ ctl_target.menu_display_target("test_select", ctl_target.status.test_select.done, ctl_target.status.test_select.target) }}
                </span>
                <span class="target-completed" ng-show="ctl_target.is_all_finish('test_select')">
                    {{ ctl_target.menu_display_target("test_select", ctl_target.status.test_select.done, ctl_target.status.test_select.target) }}
                    <i class="ion-android-star" />
                </span>
            </span>
        </ons-list-item>
    </ons-list>

    <div class="bottom-bar" style="text-align: center">
        <ons-row class="bottom-bar__line-height">
            <ons-col ng-click="exit_app();">
                <ons-icon icon="ion-android-exit" fixed-width="true"></ons-icon>
                <!--
                <span>
                    {{ 'EXIT_APP' | translate }}
                </span>
                -->
            </ons-col>
            <ons-col style="text-align: right;"
                     ng-click="app.navi.replacePage('setting.html', {animation: 'none'});
                         menu_click($event);"
                         ng-dblclick="ctl_setting.toggle_debug_mode($event)">
                <ons-icon icon="ion-android-settings" fixed-width="true"></ons-icon>
                <!--
                <span>
                    {{ 'SETTING' | translate }}
                </span>
                -->
            </ons-col>
        </ons-row>
    </div>

</ons-page>